<template>
  <v-main>
    <v-sheet>
      <v-sheet height="100vh" color="#ffd600">
        <v-parallax style="height: 100vh" src>
          <v-container fill-height>
            <v-layout fill-height align-center>
              <v-sheet
                color="transparent"
                style="color: #313131; z-index: 1 !important"
              >
                <h3 class="font-weight-black mt-16" style="color: #ff5c00">
                  MOBILE SERVICE
                </h3>
                <h1 class="font-weight-black">ì…ì‹œì¹œêµ¬ í•™í•™ì´</h1>
                <h3 class="font-weight-black mb-3">
                  ì…ì‹œ ì •ë³´ë¥¼ ê°€ë³ê³  ì¬ë¯¸ìˆê²Œ.
                </h3>
              </v-sheet>
            </v-layout>
            <img
              class="hidden-xs-only"
              height="70%"
              style="position: absolute; bottom: 0; right: -50px"
              :src="require('@/assets/hakhak.png')"
            />
          </v-container>
        </v-parallax>
      </v-sheet>
      <div
        class="d-flex"
        style="position: relative; top: -100px; overflow-y: hidden"
      >
        <v-col
          v-for="(review, index) in reviews"
          :key="index"
          lg="2"
          md="2"
          sm="3"
          cols="4"
        >
          <v-card color="#fafafa" elevation="4">
            <v-card-subtitle>
              <v-img :src="require('@/assets/stars.svg')" width="80%" />
              <span class="mt-2 text-subtitle-1 black--text font-weight-bold">
                {{ review.title }}
              </span>
              <br />
              {{ review.name }}
            </v-card-subtitle>
            <v-card-text
              class="text-caption black--text font-weight-bold mb-4"
              style="height: 100px; overflow: hidden"
            >
              {{ review.text }}
            </v-card-text>
          </v-card>
        </v-col>
      </div>
    </v-sheet>
    <v-sheet class="pb-8">
      <v-container :class="$vuetify.breakpoint.xsOnly ? 'pb-8' : 'pb-8 px-16'">
        <v-row
          justify="center"
          class="text-center"
          :class="$vuetify.breakpoint.smAndDown ? '' : 'mx-16'"
        >
          <v-col
            cols="4"
            xl="3"
            v-for="counter in counters"
            :key="counter.name"
          >
            <v-sheet
              rounded="circle"
              style="
                background: linear-gradient(#fff, rgba(196, 196, 196, 0.2));
              "
            >
              <v-responsive aspect-ratio="1">
                <v-layout
                  fill-height
                  align-center
                  justify-center
                  class="text-center"
                >
                  <h3
                    :class="`${
                      $vuetify.breakpoint.xsOnly
                        ? 'text-subtitle-2'
                        : $vuetify.breakpoint.mdAndDown
                        ? 'text-subtitle-1'
                        : 'text-h6'
                    } font-weight-medium`"
                    style="position: absolute; top: 20%; opacity: 0.3"
                  >
                    {{ counter.name }}
                  </h3>
                  <div>
                    <h3
                      :class="`${
                        $vuetify.breakpoint.xsOnly
                          ? 'text-h5'
                          : $vuetify.breakpoint.mdAndDown
                          ? 'text-h4'
                          : 'text-h3'
                      } font-weight-black`"
                      v-html="counter.count"
                    >
                      {{ counter.count }}
                    </h3>
                  </div>
                </v-layout>
              </v-responsive>
            </v-sheet>
          </v-col>
        </v-row>
      </v-container>
    </v-sheet>
    <v-sheet>
      <v-container :class="$vuetify.breakpoint.xsOnly ? '' : 'pb-0 px-16'">
        <v-card flat :class="$vuetify.breakpoint.smAndDown ? '' : 'pb-0 mx-16'">
          <v-card-title class="pb-0">
            <b>ì „êµ­ ëŒ€í•™ìƒë“¤ì´ ë‹µí•´ì£¼ëŠ” ì…ì‹œ ì§ˆë¬¸</b>
          </v-card-title>
        </v-card>
      </v-container>
      <v-img height="500px" :src="require('@/assets/hakhak_letter.png')">
        <v-container fill-height class="pl-16">
          <v-layout
            align-center
            :class="$vuetify.breakpoint.smAndDown ? '' : 'pl-16 ml-16'"
          >
            <div
              class="text-h5"
              style="color: #a26c00"
              v-html="
                `ì§€ê¸ˆê¹Œì§€<br /><b>${coreReplyCount}ê°œì˜ ë‹µë³€</b>ì´<br />ëª¨ì˜€ì–´ìš”`
              "
            />
          </v-layout>
        </v-container>
      </v-img>
    </v-sheet>
    <v-sheet dark>
      <v-img :src="require('@/assets/hakhak_block.png')">
        <v-container
          fill-height
          :class="$vuetify.breakpoint.xsOnly ? '' : 'px-16'"
        >
          <v-layout fill-height align-center>
            <v-sheet class="my-16" color="transparent" width="100%">
              <h2 style="color: #ffffff88">í•™í•™ì´ì™€ í•¨ê»˜</h2>

              <h2>ì„±ê³µì ì¸ ì…ì‹œë¥¼</h2>

              <div class="d-flex mt-16">
                <v-card flat>
                  <v-img :src="require('@/assets/hakhak.webp')" width="52" />
                </v-card>

                <div>
                  <v-card-title class="pt-0 pb-3">
                    <b>í•™í•™ì´ - ì…ì‹œê³ ë¯¼ í•´ê²°ì‚¬</b>
                  </v-card-title>

                  <v-card-subtitle class="pb-0">
                    ì…ì‹œê°€ ê³ ë¯¼ë  ë• í•™í•™ì´ë¥¼ ì°¾ì•„ì™€
                  </v-card-subtitle>
                </div>

                <v-spacer />

                <v-btn @click="download" outlined rounded>
                  <b>ì•±ìŠ¤í† ì–´ ></b>
                </v-btn>

                <v-btn class="ml-4" @click="download" outlined rounded>
                  <b>êµ¬ê¸€í”Œë ˆì´ ></b>
                </v-btn>
              </div>

              <v-row class="mt-2">
                <v-col cols="4">
                  <v-img contain :src="require('@/assets/hakhak_app_1.png')" />
                </v-col>
                <v-col cols="4">
                  <v-img contain :src="require('@/assets/hakhak_app_2.png')" />
                </v-col>
                <v-col cols="4">
                  <v-img contain :src="require('@/assets/hakhak_app_3.png')" />
                </v-col>
              </v-row>
            </v-sheet>
          </v-layout>
        </v-container>
      </v-img>
    </v-sheet>
    <v-bottom-sheet v-model="bottomSheet" hide-overlay persistent>
      <v-sheet height="200px">
        <v-container>
          <v-row no-gutters>
            <v-card width="100px" flat>
              <v-img
                height="100px"
                aspect-ratio="1"
                :src="require('@/assets/hakhak.webp')"
              />
            </v-card>
            <div>
              <v-card-title class="pt-0">í•™í•™ì´ - ì…ì‹œê³ ë¯¼ í•´ê²°ì‚¬</v-card-title>
              <v-card-subtitle class="pb-0">
                ì…ì‹œê°€ ê³ ë¯¼ë  ë• í•™í•™ì´ë¥¼ ì°¾ì•„ì™€
              </v-card-subtitle>
              <v-card-subtitle class="pt-0">
                <v-rating
                  class="d-inline"
                  length="5"
                  size="10"
                  value="5"
                  readonly
                  dense
                  color="orange"
                />
                <span class="ml-2 caption">4.8 â€¢ 910ê°œì˜ í‰ê°€</span>
              </v-card-subtitle>
            </div>
          </v-row>

          <v-btn outlined block large class="mt-4" @click="download">
            <v-icon left small>mdi-download</v-icon>
            ì„¤ì¹˜í•˜ê¸°
          </v-btn>
        </v-container>
      </v-sheet>
    </v-bottom-sheet>
  </v-main>
</template>

<script lang="ts">
import Vue from "vue"
import axios from "axios"

export default Vue.extend({
  name: "HakHak",

  data: () => ({
    text: "ì…ì‹œê°€ ê¶ê¸ˆí•  ë•\ní•™í•™ì´ì—ê²Œ ë¬¼ì–´ë´",
    title: "",
    blink: false,
    counters: [
      { name: "êµ¬ë…ì ìˆ˜", count: "0ëª…" },
      { name: "í‰ê·  í‰ì ", count: "4.8ì " },
      { name: "í•´ê²°í•œ ì…ì‹œ ê³ ë¯¼", count: "0ê±´" },
    ],
    reviews: [
      {
        title: "ìƒì•  ì²« ë¦¬ë·°...â¤ï¸",
        name: "ë¯ë°ˆë°ˆ",
        text: "ì €ëŠ” ì¹´í†¡ í”Œì¹œ ì´ëŸ°ê²ƒë„ ì•„ë…”ê³  ê´‘ê³ ë¡œ ë‹¤ìš´ë°›ì•„ ë´¤ëŠ”ë° ì†ëŠ” ì…ˆì¹˜ê³  ë“¤ì–´ê°€ë³´ì§€ ë­ ë¼ëŠ” ìƒê°ì„ ë‹¨ë°˜ì— ë°”ê¾¸ê²Œ ë§Œë“  í•™í•™ì´ !! ì •ë§ ë„ì›€ ë§ì´ ë°›ëŠ” ì¤‘ì´ì—ìš” ì´ëŸ° ì•± ë§Œë“¤ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¹... ã…ã… ì§ˆë¬¸ë„ ë³´ë‚´ë´¤ëŠ”ë° ë‹µì¥ë„ ë¹¨ë¦¬ ì˜¤ê³  ë„ˆë¬´ ìì„¸í•˜ê²Œ? ì¹œì ˆí•˜ê²Œ ë³´ë‚´ì£¼ì…”ì„œ ê°ë™ ëŒ€ë¹µ ë§ì´ ë°›ì•˜êµ¬ìš” ì¹¼ëŸ¼ë“¤ë„ ë„ì›€ì´ ë§ì´ ë˜ë”ë¼êµ¬ìš” ì…ì‹œ ëë‚ ë•Œê¹Œì§€ í•™í•™ì´ì˜ ë„ì›€ì„ ë°›ì•„ì„œ í˜ë‚´ê² ìŠµë‹ˆë‹¤ !! ê°ì‚¬í•´ìš” !!",
      },
      {
        title: "í•™í•™ì´ ìµœê³ ì—ìš”",
        name: "ë¼ì²¼í‚´",
        text: "ì „ ì²˜ìŒì— ëª‡ê°œ ì§ˆë¬¸ë§Œ ë¬´ë£Œê² ì§€ã…œã…œ í–ˆëŠ”ë° ê·¸ëŸ°ê²ƒë„ ì•„ë‹ˆì˜€ê³  í•˜ë‚˜í•œ ì •ì„±ìŠ¤ëŸ½ê²Œ ë‹µí•´ì£¼ì‹œê³  ë”°ë¡œ ê³µë¶€ë²•ì´ë‘ ê·¸ ì™¸ ì…ì‹œ ë˜ëŠ” ê³µë¶€ ê´€ë ¨ ê¸€ ì˜¬ë ¤ì£¼ì‹  ê±° ë³´ê³  ë„ˆë¬´ ê°ë™ ë¨¹ì—ˆì–ì•„ìš”...ğŸ¥º ë„ˆë¬´ ë„ì›€ ë˜ê³  ê¸€ ì˜¬ë¼ì˜¬ë•Œë§ˆë‹¤ ì„¤ë ˆë©´ì„œ ì½ì–´ìš” ë„ˆë¬´ ìœ ìµí•˜ê³  ëŒ€í•™ìƒë¶„ë“¤ì´ë‹ˆ ë°”ì˜ì‹¤í…ë° ì´ë ‡ê²Œ ë„ì›€ì´ í•„ìš”í•œ í•™ìƒë“¤ì„ ë´ì£¼ì‹œëŠ” ê²ƒ ë„ˆë¬´ ê°ì‚¬ë“œë ¤ìš” ì œ ì§„ì§œ ì¸ìƒì•±ì´ì—ìš” ì¶”ì²œì¶”ì²œğŸ˜­",
      },
      {
        title: "í•™í•™ì´ì§±â—ï¸",
        name: "êµëŒ•ë‘",
        text: "ì…ì‹œ ìƒë‹´ì€ ë³´í†µ ëˆë„ ë“¤ ê²ƒ ê°™ê³  ë­”ê°€ í•˜ê¸° ì–´ë ¤ìš´ ì´ë¯¸ì§€ë¼ê³  ìƒê°í•˜ê³  ìˆì—ˆëŠ”ë°ğŸ˜¿ í•™í•™ì´ë¥¼ ì•Œê²Œ ë˜ë©´ì„œ ì§„ì§œ ìœ ìš©í•œ ì•±ìœ¼ë¡œ ì˜ ì´ìš©í•˜ê³  ìˆì–´ìš”ğŸ‘ğŸ» ì§ì ‘ ë©˜í† ë¶„ë“¤ì´ ê³ ë¯¼ì— ë‹µë³€í•´ì£¼ì…”ì„œ ì§„ì§œ í° ë„ì›€ ë¼ìš” ì—†ì–´ì„œëŠ” ì•ˆë  ì–´í”Œ ê¼­ ì‚¬ìš©í•˜ì‹œê¸¸ğŸ˜„â™¥ï¸",
      },
      {
        title: "ğŸ‘‘ ì²« ë¦¬ë·° : ë§¤ìš° ì¢‹ì€ ì•±ì…ë‹ˆë‹¤ :)",
        name: "ë‹¬í•œì¤Œ",
        text: "ì•± ë””ìì¸ë¶€í„° ë§ˆìŒì— ë“­ë‹ˆë‹¤, ì¹´í†¡ í”„ë¡œí•„ì—ì„œ í•™ì—… ê´€ë ¨ë§ì€ ë„ì›€ ë°›ì•„ì™”ì–´ìš”! ì´ ì•±ì—ì„œë„ ë§ì´ ì§ˆë¬¸í•  ì˜ˆì •ì…ë‹ˆë‹¤! ì—¬ëŸ¬ë¶„ ì§ˆë¬¸ë„ [ ë¬´ë£Œ ] ì´ê³ , ë‹µë³€ë„ ìƒì„¸í•˜ê²Œ ì˜µë‹ˆë‹¤! ìµœê³ ì˜ ë©˜í† ë¶„ë“¤ì´ ì¼ì¼ì´ í™•ì¸í•˜ê³ , ë‹µë³€í•´ì£¼ì‹œëŠ”ê±°ì—ìš”!! [ ì¹¼ëŸ¼ ] ì—ë„ ì¢‹ì€ ì •ë³´ê°€ ë§ì´ ìˆìœ¼ë‹ˆ í•œ ë²ˆì”© ì½ì–´ë³´ì…¨ìœ¼ë©´ ì¢‹ê² ì–´ìš”! ì •ë§ ì…ì‹œì¤€ë¹„í•˜ëŠ” ëª¨ë“  í•™ìƒë¶„ë“¤ì´ ì‚¬ìš©í•´ë³´ì…¨ìŒ í•´ìš” â¤ï¸ í•™í•™ì´ ìµœê³ !",
      },
      {
        title: "ìµœê³  ã… ã… â¤ï¸",
        name: "ìœ ì•„ë¼ìœ ",
        text: "ê³ ë¯¼ë„ ë§ê³  ê²°ì •ë„ í™•ì‹¤íˆ ëª»ë‚´ë¦¬ëŠ” ì„±ê²©ì¸ë° ì´ ì•±ì„ í†µí•´ì„œ ì œê°€ ë‹µë‹µí–ˆë˜ ë¶€ë¶„ë“¤ì„ í•´ê²°í•´ì£¼ê³  ì¼ë‹¨ ì•±ì´ ë„ˆë¬´ ìµœê³ ì…ë‹ˆë‹¤ ã…  ì´ëŸ° ì•±ì´ ë‚˜ì˜¤ê¸¸ í•­ìƒ ê¸°ë‹¤ë ¸ì—ˆì–´ìš” ã…  ê³§ ìˆ˜í—˜ìƒì¸ë° ì œê°€ ì›í–ˆë˜ ì•±ì´ ë‚˜ì™€ì„œ í–‰ë³µí•˜ë„¤ìš” ! ì§± ì¢‹ìŒ",
      },
      {
        title: "ì •ë§ ì¶”ì²œë“œëŸ¬ìš”",
        name: "í˜œì •ë³´ë¦¬",
        text: "ì½”ë¡œë‚˜ë¡œ ì¸í•´ì„œ ìƒê¸°ë¶€ë„ ëª¨ë¥´ê² ê³ , ë‚´ì‹  ë°©ë²•ë„ ì°¾ì§€ ëª»í•œ ê³ 1ì…ë‹ˆë‹¤ ëª¨ë“  ë©˜í† ë¶„ë“¤ì´ ì •ë§ ìì„¸í•˜ê³  ì¹œì ˆí•˜ê²Œ ì•ŒëŸ¬ì£¼ì„¸ìš” ê·¸ë¦¬ê³  í¸ì§€ì¹¸ì—ì„œ ë©˜í† ë¶„ë“¤ì˜ ì´ì•¼ê¸°ë‚˜ ê¿€íŒê¹Œì§€ ì•Œ ìˆ˜ ìˆì–´ìš” ì €ê°™ì´ ê¸¸ì„ ëª»ì¡ìœ¼ì‹  ë¶„ë“¤ ê¼­ ì¶”ì²œë“œë¦½ë‹ˆë‹¤ğŸ˜ŠğŸ˜Š",
      },
      {
        title: "ì™„ì „ ì¢‹ì•„ìš”",
        name: "ë¨€ã…“ã„´ã…ë°ˆ",
        text: "ì£¼ë³€ì— ì…ì‹œ ì˜ ì•„ëŠ” ì‚¬ëŒì´ ì—†ì–´ì„œ ë‹µë‹µí–ˆëŠ”ë° ì¢‹ì€ ì •ë³´ë„ ë§ê³  ë™ê¸°ë¶€ì—¬ë„ ë§ì´ ë°›ê³  ê°‘ë‹ˆë‹¹ ì²˜ìŒì—” ê´‘ê³  ë³´ê³  ì—ì´ ì´ê²ƒë„ ë‹¤ë¥¸ê²ƒì²˜ëŸ¼ ê´‘ê³ ë§Œ ë§ê³  ì´ëŸ¬ì§€ ì•Šì„ê¹Œ ì¢‹ì•„ë´¤ì ì–¼ë§ˆë‚˜ ì¢‹ê² ì–´ ì´ëŸ° ë§˜ìœ¼ë¡œ ê¹”ì•„ë´¤ëŠ”ë° ì™„ì „ ì¢‹ë„¤ìš”... ã…ã…ã… ì¢‹ì€ ì•± ë§Œë“¤ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤ â¤ï¸â¤ï¸",
      },
      {
        title: "ì—„ì²­ ë„ì›€ë˜ìš”",
        name: "ë¿Œë¿Œì–‘",
        text: "ì¤‘3ì´ê³  ì´ì œ ê³ ë“±í•™êµë„ ê°€ì•¼í•˜ê³  ì…ì‹œë‚˜ ìˆ˜ëŠ¥ ì´ëŸ°ê±°ì— ëŒ€í•´ ê¶ê¸ˆì¦ì´ ë§ì•˜ëŠ”ë° ì—¬ê¸°ì„œ ë‹¤ ìì„¸íˆ ì•Œë ¤ì£¼ê³ ì‹¤ì œë¡œ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê¿ˆì—ê·¸ë¦¬ë˜ ê·¸ëŸ° ëŒ€í•™êµì— ì…í•™í•œ ì‚¬ëŒë“¤ì˜ ê³µë¶€ ê¿€íŒì´ë¼ê±°ë‚˜ ì´ì•¼ê¸°ë“¤ë„ ìˆìœ¼ë‹ˆê¹ ë³´ë©´ì„œ ë„ì›€ë„ ë§ì´ ë˜ì—ˆì–´ìš”ã… ã…  ê³µë¶€ë²•ë„ ìˆê³  ì¸ê°•, ë©˜íƒˆ ì¡ëŠ”ë²• ì—¬ëŸ¬ê°€ì§€ ìê¸°ê´€ë¦¬?ì— ëŒ€í•œ ë‚´ìš©ë“¤ë„ ìˆì–´ìš” ì´ê±´ í•™ìƒë“¤ì´ ì•„ë‹ˆë¼ ì¬ìˆ˜í•˜ì‹œëŠ”ë¶„ë“¤ì´ë‚˜ ê·¸ëƒ¥ ì‹œí—˜ì¤€ë¹„í•˜ì‹œëŠ”ë¶„ë“¤ì´ ì‚¬ìš©í•˜ì…”ë„ ë˜ëŠ” ì•±ì¸ê²ƒ ê°™ì•„ìš”! ì „ ì •ë§ ë„ì›€ë˜ì—ˆì–´ìš” ê³ ë“±í•™êµ ìƒí™œí• ë•Œë„ ë§ì´ ë„ì›€ë°›ì„ê²ƒê°™ì•„ìš”ã… ê°ì‚¬í•©ë‹ˆë§!",
      },
    ],
    letter: 0,
    userCount: 0,
    questionCount: 0,
    coreReplyCount: 0,
    bottomSheet: false,
  }),

  beforeMount() {
    document.querySelector("body")?.setAttribute("style", "background: #ffd600")
    document
      .querySelector("meta[name='theme-color']")
      ?.setAttribute("content", "#ffd600")

    const userAgent = navigator.userAgent

    if (/Android|iPhone|iPad|iPod/i.test(userAgent)) this.bottomSheet = true
  },

  methods: {
    download() {
      const userAgent = navigator.userAgent

      const isAndroid = /Win|Android/i.test(userAgent)
      const isIos = /Mac|iPhone|iPad|iPod/i.test(userAgent)

      if (isAndroid) {
        location.href =
          "intent://www.hakhak.io/#Intent;scheme=hakhak;package=kr.flatgarden.hakhak;end"
        location.href = "market://details?id=kr.flatgarden.hakhak"
      } else if (isIos) {
        location.href =
          "https://apps.apple.com/kr/app/%ED%95%99%ED%95%99%EC%9D%B4/id1509380462"
      }
    },
  },

  mounted() {
    this.reviews.sort(() => Math.random() - 0.5)

    this.$store.state.dialog = this.$route.params.dialog

    window.scrollTo(0, 0)

    let index = 0
    const interval = setInterval(() => {
      let char = this.text[index++]
      this.title += char === "\n" ? "<br/>" : char

      if (index >= this.text.length) {
        clearInterval(interval)

        setInterval(() => {
          this.blink = !this.blink
        }, 500)
      }
    }, Math.floor(Math.random() * 100) + 100)

    const getUserCountQuery = `query getUserCount {
       getUserCount
     }`

    const questionCountInitQuery = `query questionCountInit {
       questionCountInit{
         questionCount
         coreReplyCount
       }
     }`

    axios
      .post("https://api.hakhak.io/graphql", { query: getUserCountQuery })
      .then((res) => {
        this.counters[0].count =
          res.data.data.getUserCount.toLocaleString("ko-KR") + "ëª…"
      })

    axios
      .post("https://api.hakhak.io/graphql", { query: questionCountInitQuery })
      .then((res) => {
        const result = res.data.data.questionCountInit
        this.counters[2].count =
          result.questionCount.toLocaleString("ko-KR") + "ê±´"
        this.coreReplyCount = result.coreReplyCount
      })
  },
})
</script>
